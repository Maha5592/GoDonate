<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ù…Ù‚Ù‡Ù‰ Ø¨Ù„Ø³ - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
    }
    .container {
      max-width: 900px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #333;
    }
    input, select, button {
      padding: 10px;
      margin: 5px;
      width: 100%;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    button {
      background: #27ae60;
      color: white;
      cursor: pointer;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ddd;
    }
    th {
      background-color: #eee;
    }
    .login-box {
      max-width: 400px;
      margin: 100px auto;
      text-align: center;
    }
    .logout-btn {
      float: left;
      background: #c0392b;
    }
  </style>
</head>
<body>

<div id="loginPage" class="login-box">
  <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
  <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"/>
  <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"/>
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div id="app" style="display:none;" class="container">
  <h1>â˜• Ù…Ù‚Ù‡Ù‰ Ø¨Ù„Ø³ - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ±Ø¹</h1>
  <button class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>

  <h3>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
  <input type="text" id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"/>
  <input type="number" id="productQty" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ© ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"/>
  <input type="number" id="productPrice" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹"/>
  <button onclick="addProduct()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>

  <h3>ğŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ</h3>
  <table id="inventoryTable">
    <thead>
      <tr>
        <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
        <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
        <th>Ø§Ù„Ø³Ø¹Ø±</th>
        <th>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</th>
        <th>Ø¨ÙŠØ¹</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3>ğŸ“Š Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
  <table id="reportTable">
    <thead>
      <tr>
        <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
        <th>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</th>
        <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
  const correctUser = "admin";
  const correctPass = "1234";

  let inventory = [];
  let salesReport = [];

  function login() {
    const user = document.getElementById('username').value;
    const pass = document.getElementById('password').value;

    if (user === correctUser && pass === correctPass) {
      document.getElementById('loginPage').style.display = 'none';
      document.getElementById('app').style.display = 'block';
    } else {
      alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±");
    }
  }

  function logout() {
    if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ")) {
      document.getElementById('loginPage').style.display = 'block';
      document.getElementById('app').style.display = 'none';
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
    }
  }

  function addProduct() {
    const name = document.getElementById('productName').value;
    const qty = parseInt(document.getElementById('productQty').value);
    const price = parseFloat(document.getElementById('productPrice').value);

    if (!name || qty <= 0 || price <= 0) {
      alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!");
      return;
    }

    inventory.push({ name, qty, price });
    updateInventoryTable();

    // Initialize sales report entry
    if (!salesReport.find(p => p.name === name)) {
      salesReport.push({ name, sold: 0, total: 0 });
    }

    document.getElementById('productName').value = '';
    document.getElementById('productQty').value = '';
    document.getElementById('productPrice').value = '';
  }

  function sellProduct(index) {
    const saleQty = prompt(`ÙƒÙ…ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹ Ù„Ù€ ${inventory[index].name}:`, 1);
    if (saleQty && !isNaN(saleQty) && saleQty > 0) {
      if (parseInt(saleQty) > inventory[index].qty) {
        alert("Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø£ÙƒØ¨Ø± Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ØªØ§Ø­!");
        return;
      }

      inventory[index].qty -= parseInt(saleQty);
      const amount = parseFloat(saleQty) * inventory[index].price;

      const productInReport = salesReport.find(p => p.name === inventory[index].name);
      if (productInReport) {
        productInReport.sold += parseInt(saleQty);
        productInReport.total += amount;
      }

      updateInventoryTable();
      updateReportTable();
    }
  }

  function updateInventoryTable() {
    const tbody = document.querySelector('#inventoryTable tbody');
    tbody.innerHTML = '';

    inventory.forEach((item, index) => {
      const row = `
        <tr>
          <td>${item.name}</td>
          <td>${item.qty}</td>
          <td>â‚ª${item.price.toFixed(2)}</td>
          <td><button onclick="restock(${index})">ØªØ¹Ø¯ÙŠÙ„</button></td>
          <td><button onclick="sellProduct(${index})">Ø¨ÙŠØ¹</button></td>
        </tr>`;
      tbody.innerHTML += row;
    });
  }

  function restock(index) {
    const newQty = prompt(`Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù€ ${inventory[index].name}`, inventory[index].qty);
    if (newQty !== null && !isNaN(newQty)) {
      inventory[index].qty = parseInt(newQty);
      updateInventoryTable();
    }
  }

  function updateReportTable() {
    const tbody = document.querySelector('#reportTable tbody');
    tbody.innerHTML = '';

    salesReport.forEach(item => {
      if (item.sold > 0) {
        const row = `
          <tr>
            <td>${item.name}</td>
            <td>${item.sold}</td>
            <td>â‚ª${item.total.toFixed(2)}</td>
          </tr>`;
        tbody.innerHTML += row;
      }
    });
  }
</script>

</body>
</html>